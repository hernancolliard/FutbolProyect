"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[923],{2923:(e,a,l)=>{l.r(a),l.d(a,{default:()=>m});var t=l(9379),s=l(5043),r=l(6305),i=l(4117),n=l(2273),o=l(2097),c=l(298),d=l(6803),u=l(9441),h=l(2946),p=l(579);const m=function(e){let{onOfferCreated:a,onClose:l}=e;const{t:m}=(0,i.Bd)(),[g,f]=(0,s.useState)({titulo:"",descripcion:"",ubicacion:"",puesto:"",salario:"",nivel:"",horarios:"",detalles_adicionales:""}),[x,v]=(0,s.useState)([]),[A,j]=(0,s.useState)(""),[b,_]=(0,s.useState)(""),[y,C]=(0,s.useState)(0),[S,w]=(0,s.useState)(!1),k=e=>{f((0,t.A)((0,t.A)({},g),{},{[e.target.name]:e.target.value}))};return(0,p.jsxs)("div",{className:"form-card create-offer-card",children:[(0,p.jsx)("h2",{children:m("create_offer_title")}),b&&(0,p.jsx)(d.A,{severity:"success",sx:{mt:2},children:b}),A&&(0,p.jsx)(d.A,{severity:"error",sx:{mt:2},children:A}),(0,p.jsx)("form",{onSubmit:async e=>{e.preventDefault(),j(""),_(""),C(0),w(!0);const t=new FormData;Object.keys(g).forEach(e=>{t.append(e,g[e])}),x.length>0&&t.append("imagen_url",x[0]);const s={onUploadProgress:e=>{const a=Math.round(100*e.loaded/e.total);C(a)}};try{await r.A.post("/offers",t,s),_(m("offer_published_success")),f({titulo:"",descripcion:"",ubicacion:"",puesto:"",salario:"",nivel:"",horarios:"",detalles_adicionales:""}),v([]),a&&a(),setTimeout(()=>{l&&l(),_("")},2e3)}catch(o){var i,n;j((null===(i=o.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||m("error_publishing_offer"))}finally{w(!1),setTimeout(()=>C(0),1500)}},children:(0,p.jsxs)(c.A,{spacing:2,sx:{mt:2},children:[(0,p.jsx)(n.A,{name:"titulo",label:m("offer_title_placeholder"),value:g.titulo,onChange:k,required:!0,fullWidth:!0}),(0,p.jsx)(n.A,{name:"descripcion",label:m("offer_description_placeholder"),value:g.descripcion,onChange:k,required:!0,fullWidth:!0,multiline:!0,rows:4}),(0,p.jsx)(n.A,{name:"ubicacion",label:m("location_placeholder"),value:g.ubicacion,onChange:k,fullWidth:!0}),(0,p.jsx)(n.A,{name:"puesto",label:m("position_placeholder"),value:g.puesto,onChange:k,fullWidth:!0}),(0,p.jsx)(n.A,{name:"salario",label:m("salary_placeholder"),value:g.salario,onChange:k,fullWidth:!0}),(0,p.jsxs)(n.A,{select:!0,name:"nivel",label:m("select_level_placeholder"),value:g.nivel,onChange:k,fullWidth:!0,children:[(0,p.jsx)(u.A,{value:"",children:m("select_level_placeholder")}),(0,p.jsx)(u.A,{value:"Profesional",children:m("level_professional")}),(0,p.jsx)(u.A,{value:"Semi-profesional",children:m("level_semi_professional")}),(0,p.jsx)(u.A,{value:"Amateur",children:m("level_amateur")})]}),(0,p.jsx)(n.A,{name:"horarios",label:m("schedule_placeholder"),value:g.horarios,onChange:k,fullWidth:!0}),(0,p.jsx)(n.A,{name:"detalles_adicionales",label:m("additional_details_placeholder"),value:g.detalles_adicionales,onChange:k,fullWidth:!0,multiline:!0,rows:3}),(0,p.jsx)(h.A,{onFilesChange:v,uploadProgress:y}),(0,p.jsxs)(c.A,{direction:"row",spacing:2,justifyContent:"flex-end",sx:{pt:2},children:[(0,p.jsx)(o.A,{variant:"contained",color:"primary",type:"submit",disabled:S,children:m(S?"publishing...":"publish_offer_button")}),l&&(0,p.jsx)(o.A,{variant:"outlined",color:"secondary",onClick:l,type:"button",disabled:S,children:m("cancel_button")})]})]})})]})}},2946:(e,a,l)=>{l.d(a,{A:()=>v});var t=l(9379),s=l(5043),r=l(8789),i=l(4117),n=l(3969),o=l(5895),c=l(5315),d=l(2455),u=l(2579),h=l(6185),p=l(6020),m=l(8128),g=l(5362),f=l(579);const x=(0,m.Ay)(n.A,{shouldForwardProp:e=>"isDragActive"!==e})(e=>{let{theme:a,isDragActive:l}=e;return{border:"2px dashed ".concat(l?a.palette.primary.main:a.palette.divider),borderRadius:a.shape.borderRadius,padding:a.spacing(3),textAlign:"center",cursor:"pointer",backgroundColor:l?a.palette.action.hover:"transparent",transition:"border .24s ease-in-out, background-color .24s ease-in-out"}});const v=function(e){let{onFilesChange:a,uploadProgress:l,multiple:m}=e;const{t:v}=(0,i.Bd)(),[A,j]=(0,s.useState)([]),[b,_]=(0,s.useState)([]),y=(0,s.useCallback)((e,l)=>{const t=e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}));if(j(m?e=>[...e,...t]:t),l.length>0){const e=l.map(e=>"".concat(e.file.name,": ").concat(e.errors.map(e=>e.message).join(", ")));_(e)}else _([]);e.length>0&&(a(e),m||j([]))},[m,a]);(0,s.useEffect)(()=>{100===l&&j([])},[l]);const{getRootProps:C,getInputProps:S,isDragActive:w}=(0,r.VB)({onDrop:y,accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxSize:5242880,maxFiles:m?4:1});return(0,f.jsxs)(n.A,{children:[(0,f.jsxs)(x,(0,t.A)((0,t.A)({},C()),{},{isDragActive:w,children:[(0,f.jsx)("input",(0,t.A)({},S())),(0,f.jsx)(o.A,{children:v("drag_drop_files","Arrastra y suelta hasta 4 im\xe1genes aqu\xed, o haz clic para seleccionar")}),(0,f.jsx)(o.A,{variant:"body2",color:"textSecondary",children:v("file_constraints","Im\xe1genes (JPEG, PNG, GIF) de hasta 5MB cada una.")})]})),b.length>0&&(0,f.jsx)(n.A,{mt:2,children:b.map((e,a)=>(0,f.jsx)(o.A,{color:"error",children:e},a))}),A.length>0&&(0,f.jsx)(c.A,{sx:{mt:2},children:A.map((e,a)=>(0,f.jsxs)(d.Ay,{secondaryAction:(0,f.jsx)(u.A,{edge:"end","aria-label":"delete",onClick:()=>{return a=e,void j(e=>e.filter(e=>e!==a));var a},children:(0,f.jsx)(g.A,{})}),children:[(0,f.jsx)("img",{src:e.preview,alt:e.name,style:{width:50,height:50,marginRight:16,objectFit:"cover",borderRadius:4}}),(0,f.jsx)(h.A,{primary:e.name,secondary:"".concat((e.size/1024).toFixed(2)," KB")})]},a))}),l>0&&l<100&&(0,f.jsxs)(n.A,{sx:{width:"100%",mt:2},children:[(0,f.jsx)(p.A,{variant:"determinate",value:l}),(0,f.jsx)(o.A,{variant:"body2",color:"textSecondary",align:"center",children:"".concat(Math.round(l),"%")})]})]})}}}]);
//# sourceMappingURL=923.2afc6cbc.chunk.js.map